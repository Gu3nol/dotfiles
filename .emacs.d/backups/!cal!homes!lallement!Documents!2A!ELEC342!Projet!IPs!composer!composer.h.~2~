/*
 * =============================================================================
 *
 *       Filename:  composer.h
 *
 *    Description:  composer module
 *
 * =============================================================================
 */

#ifndef _COMPOSER_
#define _COMPOSER_

#include <systemc>

#include "wb_master_fsm.h"
#include "wb_slave.h"

namespace soclib { namespace caba {

	template<typename wb_param>
	    class Composer: sc_core::sc_module
	    {
	    public:
		sc_core::sc_in<bool> p_clk;
		sc_core::sc_in<bool> p_resetn;
		soclib::caba::WbMaster<wb_param> p_wb;
		soclib::caba::WbSlave<wb_param> p_wb_slave;

	    private:
		// main thread
		void main_loop();

		void     wait_cycles (uint32_t delay);
		WbMasterFsm<wb_param> master0;

	    protected:
		SC_HAS_PROCESS(Composer);

	    public:
		// constructor
		Composer ( sc_module_name name );
	    };
    }}

#endif //_VIDEO_IN_
