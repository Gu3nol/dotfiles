#! /usr/bin/python
# -*- coding: utf-8 -*-

# Simple program to generate host commands for the VDP

import sys
import os

from random import randrange

# Constants and variable for the test
# Width of the screen
width  = 64
# Height of the screen
height = 64
# Number of host commands to generate
num_cmd = 1000
if (len(sys.argv) > 1):
    num_cmd = sys.argv[1]

# Host commands
host_cmd = ["M", "D", "C"]
pen_cmd = ["B", "W", "I"]

# Generation of random host cmd
print "Generating %d commands... " % num_cmd

output = '''-- %d Random Commands
-- This file was generated automatically for the VDP testbench with a screen
-- size of %d x %d \r\n''' % (num_cmd, width, height)

for i in range(num_cmd):
    # Choose randomly between move, draw and clear, and a color.
    cmd = host_cmd[randrange(1,len(host_cmd))]
    pen = pen_cmd[randrange(1,len(pen_cmd))]

    # Choose random coordinates.
    x = randrange(0,width)  # results in x = [0, $screenWidth)
    y = randrange(0,height) # results in y = [0, $screenHeight)

    # Compose the command and add it to the output.
    output += "%s%s %d %d\n" % (cmd, pen, x, y)

print "done"

# Store the output.
filename = "random_{%d}_{%d}x{%d}.txt" % (num_cmd, width, height)
print "Saving commands to %s... " % filename
open(filename, 'w').write(output)
print "done"
