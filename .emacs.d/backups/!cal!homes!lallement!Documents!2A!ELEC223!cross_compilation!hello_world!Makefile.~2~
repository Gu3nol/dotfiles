# OPTION DE COMPILATION
CC	     = arm-none-eabi-gcc
AS       = arm-none-eabi-as
OBJDUMP  = arm-none-eabi-objdump

LDSCRIPT = ldscript
OFILES   = hello.o serial.o utils.o init.o leds.o timer.o gpio.o buzzer.o boot_loader.c crt0.o

CFLAGS	 = -Wall -Wextra -Werror -O1 -g -nostdlib -std=gnu99
LDFLAGS  = $(shell $(CC) -print-libgcc-file-name) -T

all : hello.elf

.PHONY : clean

# Production des fichiers objets
hello.elf : $(OFILES) $(LDSCRIPT)
	$(CC) $(CFLAGS) $(OFILES) $(LDFLAGS) $(LDSCRIPT) -o $@

clean:
	rm -f *.o *.elf *.lst
