#! /usr/bin/python
# -*- coding: utf-8 -*-

import sys
import os
fichier_source = sys.argv[1]
fichier_cible = sys.argv[2]

# Read the input and output files receive as the first and second arg

SVs = []

def readfile(filename):

    # Open a file in read mode
    f = open(filename, 'r')

    # Parsing
    for line in f.readlines() :
        SVs.append((line.replace(",", "")).split())

# Save data in a output file
def savefile(filename):

    # Open a file in write mode
    g = open(filename,'w')

    # Save lines
    i = 1

    # C array format
    g.write('const float sv_alpha[6166] = {')
    for line in SVs :
        #Multiply value by 4096 + round
        for champ in line:
            g.write(str(round(float(champ)*1048576, 0)).replace(".0",""))
            g.write("\n")
    g.write('};')

# Use the functions
readfile(fichier_source)
savefile(fichier_cible)
print("OK")
