#! /usr/bin/python
# -*- coding: utf-8 -*-

import sys
import os
fichier_source = sys.argv[1]
fichier_cible = sys.argv[2]

# Lecture du fichier recu en argument 1 de la commande

SVs = []

def readfile(filename):

    # Ouverture du fichier en mode lecture
    f = open(filename, 'r')

    # Parcours des lignes du tableau et parsage
    for line in f.readlines() :
        SVs.append((line.replace(",", "")).split())


# Enregistrement des donnees dans un nouveau
# fichier recu en argument 2 de la commande
def savefile(filename):

    # Ouverture du fichier en mode ecriture
    g = open(filename,'w')

    # Enregistrement des lignes
    i = 1

    g.write('SVs = [[')
    for line in SVs :
        for champ in line - 1:
            if i % 16 :
                g.write(str(champ) + "," + "\n")
            else :
                g.write(str(champ))
                g.write('],' + '\n' + '[')
            i+=1

        #    g.write(str(champ)+ ' ')
        #   g.write('\n')
    g.write(']];')

# Utilisation des fonctions
readfile(fichier_source)
savefile(fichier_cible)
print("OK")
